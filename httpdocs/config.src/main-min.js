document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1);new form},!1);
var form=function(){this.el={bgcolour:document.getElementById("bgcolour"),notify:document.getElementById("notify"),flick:document.getElementById("flick"),update:document.getElementById("update"),submit:document.getElementById("submit"),apikey:document.getElementById("apikey"),save:document.getElementById("save")};this.config=this.getConfig();this.updateForm();this.showVersion(this.config.pblversion,this.config.jsversion);this.attach()};
form.prototype.getConfig=function(){var a=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(location.search);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))},b={};b.jsversion=a("jsversion");b.pblversion=a("pblversion");b.apikey=a("apikey");b.update=a("update");b.dark="true"==a("dark")?!0:!1;b.notify="true"==a("notify")?!0:!1;b.flick="true"==a("flick")?!0:!1;return b};
form.prototype.updateForm=function(){0<this.config.apikey.length&&(this.el.apikey.value=this.config.apikey);0<this.config.update.length&&(this.el.update.value=this.config.update);this.config.dark?(this.el.bgcolour.className="black",this.el.bgcolour.children[0].innerHTML="BLACK"):(this.el.bgcolour.className="white",this.el.bgcolour.children[0].innerHTML="WHITE");this.config.notify?(this.el.notify.className="on",this.el.notify.children[0].innerHTML="ON"):(this.el.notify.className="off",this.el.notify.children[0].innerHTML=
"OFF");this.config.flick?(this.el.flick.className="on",this.el.flick.children[0].innerHTML="ON"):(this.el.flick.className="off",this.el.flick.children[0].innerHTML="OFF")};
form.prototype.showVersion=function(a,b){for(var f=a?a:b,d=document.getElementsByClassName("app-version"),c=0;c<d.length;c++)if(d[c].getAttribute("data-version")==f){var e=d[c].getElementsByTagName("h3")[0];e.innerHTML+=" &ndash; <span>INSTALLED</span>"}a&&b&&(document.getElementById("appversioninfo").innerHTML=a,document.getElementById("jsversioninfo").innerHTML=b,document.getElementById("versioninfo").style.display="inline")};
form.prototype.attach=function(){var a=this;this.el.bgcolour.addEventListener("click",function(b){b.preventDefault();a.config.dark=!a.config.dark;a.updateForm()});this.el.notify.addEventListener("click",function(b){b.preventDefault();a.config.notify=!a.config.notify;a.updateForm()});this.el.flick.addEventListener("click",function(b){b.preventDefault();a.config.flick=!a.config.flick;a.updateForm()});this.el.update.addEventListener("change",function(){a.config.update=this.value});this.el.apikey.addEventListener("change",
function(){a.config.apikey=this.value});this.el.save.addEventListener("click",function(b){b.preventDefault();b="pebblejs://close#"+encodeURIComponent(JSON.stringify(a.config));window.location.href=b})};
